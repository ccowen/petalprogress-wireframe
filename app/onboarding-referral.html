<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PetalProgress â€” Get Started</title>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;1,300;1,400;1,500&family=DM+Sans:opsz,wght@9..40,300;9..40,400;9..40,500&display=swap" rel="stylesheet">
<style>
* { margin:0; padding:0; box-sizing:border-box; }
:root {
  --bg:        #F8F6F3;
  --surface:   #FDFCFA;
  --warm-1:    #EDE9E3;
  --warm-2:    #D4CEC7;
  --warm-3:    #9C958D;
  --text:      #2C2825;
  --text-soft: #6B6460;
  --text-muted:#A09890;
  --sage:      #8FA68C;
  --blue:      #7B9BAF;
  --coral:     #C45A5A;
  --amber:     #C4887A;
  --ease:      cubic-bezier(0.4,0,0.2,1);
}
html, body { height:100%; }
body {
  font-family: 'DM Sans', sans-serif;
  background: var(--bg); color: var(--text);
  display: flex; flex-direction: column;
  font-size: 13px; overflow: hidden;
}

/* â”€â”€ TOP NAV â”€â”€ */
/* â”€â”€ TOP BAR (matches individual dashboard) â”€â”€ */
.topbar {
  height: 54px; flex-shrink: 0;
  background: var(--surface);
  border-bottom: 1px solid var(--warm-1);
  display: flex; align-items: center;
  z-index: 100; padding: 0 24px;
}
.logo-zone {
  display: flex; align-items: center; justify-content: flex-start;
  gap: 8px; flex-shrink: 0; text-decoration: none;
}
.logo { font-family: 'Cormorant Garamond', serif; font-size: 24px; color: var(--text); line-height: 1; }
.logo-name { font-family: 'Cormorant Garamond', serif; font-size: 18px; font-weight: 500; color: var(--text); letter-spacing: 0.01em; white-space: nowrap; }
.nav-tabs { display: flex; gap: 2px; margin-left: 20px; }
.nav-tab {
  padding: 6px 18px; border-radius: 100px; font-size: 12.5px;
  color: var(--text-soft); cursor: pointer; transition: all 0.18s; letter-spacing: 0.01em;
}
.nav-tab:hover { background: var(--warm-1); color: var(--text); }
.nav-tab.active { background: var(--text); color: var(--bg); font-weight: 500; }
.nav-tab.disabled { color: var(--warm-2); cursor: default; pointer-events: none; }
.topbar-right { margin-left: auto; display: flex; align-items: center; gap: 14px; }
.mandala-name-tag { font-family: 'Cormorant Garamond', serif; font-size: 14.5px; font-style: italic; color: var(--text-soft); letter-spacing: 0.03em; }
.avatar { width: 30px; height: 30px; border-radius: 50%; background: var(--warm-1); color: var(--text-soft); font-size: 12px; font-weight: 500; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: background 0.15s; }
.avatar:hover { background: var(--warm-2); }

/* â”€â”€ PANELS â”€â”€ */
.panels { display: flex; flex: 1; overflow: hidden; }

/* â”€â”€ LEFT PANEL â”€â”€ */
.left-panel {
  width: 420px; flex-shrink: 0; background: var(--surface);
  border-right: 1px solid var(--warm-1);
  display: flex; flex-direction: column; padding: 36px 42px;
  overflow-y: auto; position: relative;
}

/* Step dots */
.step-dots { display: flex; gap: 6px; margin-bottom: 40px; }
.sdot { height: 3px; border-radius: 2px; background: var(--warm-2); transition: all 0.3s var(--ease); }
.sdot.done   { background: var(--warm-3); width: 14px; }
.sdot.active { background: var(--amber);  width: 28px; }
.sdot.future { background: var(--warm-1); width: 14px; }

/* Steps */
.step { display: none; animation: fadeUp 0.28s ease both; }
.step.show { display: flex; flex-direction: column; flex: 1; }
@keyframes fadeUp { from { opacity:0; transform:translateY(10px); } to { opacity:1; transform:translateY(0); } }

.step-eyebrow { font-size: 10px; text-transform: uppercase; letter-spacing: 0.13em; color: var(--text-muted); margin-bottom: 10px; }
.step-title { font-family: 'Cormorant Garamond', serif; font-size: 28px; font-weight: 400; line-height: 1.25; margin-bottom: 10px; }
.step-title em { font-style: italic; color: var(--text-soft); }
.step-desc { font-size: 13px; color: var(--text-soft); line-height: 1.75; margin-bottom: 22px; }

/* Tip card */
.tip-card { background: rgba(196,136,122,0.08); border: 1px solid rgba(196,136,122,0.2); border-radius: 11px; padding: 13px 15px; margin-bottom: 16px; position: relative; }
.tip-card-inner { display: flex; gap: 10px; align-items: flex-start; }
.tip-icon { font-size: 14px; flex-shrink: 0; margin-top: 1px; }
.tip-text { font-size: 12px; color: var(--text-soft); line-height: 1.7; }
.tip-text strong { color: var(--text); font-weight: 500; }
.tip-dismiss { position: absolute; top: 8px; right: 10px; font-size: 14px; color: var(--text-muted); cursor: pointer; opacity: 0.5; transition: opacity 0.15s; }
.tip-dismiss:hover { opacity: 1; }

/* System/Goal */
.sys-goal-row { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 24px; }
.sg-card { border-radius: 13px; padding: 16px; cursor: pointer; border: 2px solid var(--warm-1); background: var(--bg); transition: all 0.2s; }
.sg-card:hover { border-color: var(--warm-2); }
.sg-card.on { border-color: var(--text); background: var(--surface); }
.sg-icon { font-size: 20px; margin-bottom: 8px; }
.sg-label { font-family: 'Cormorant Garamond', serif; font-size: 17px; font-weight: 400; margin-bottom: 4px; }
.sg-desc { font-size: 11px; color: var(--text-muted); line-height: 1.6; }

/* Quote */
.quote-block { border-left: 3px solid rgba(196,136,122,0.4); padding: 12px 16px; margin-bottom: 20px; background: rgba(196,136,122,0.05); border-radius: 0 10px 10px 0; }
.quote-text { font-family: 'Cormorant Garamond', serif; font-size: 16px; font-style: italic; font-weight: 300; line-height: 1.7; color: var(--text-soft); margin-bottom: 5px; }
.quote-attr { font-size: 10.5px; color: var(--text-muted); letter-spacing: 0.05em; }

/* â”€â”€ SPONSORED HABIT CARD â”€â”€ */
.sponsored-card {
  background: rgba(143,166,140,0.06);
  border: 1.5px solid rgba(143,166,140,0.28);
  border-radius: 14px; padding: 20px 22px; margin-bottom: 20px;
}
.sponsored-badge {
  display: inline-flex; align-items: center; gap: 5px;
  font-size: 10px; text-transform: uppercase; letter-spacing: 0.1em;
  color: var(--sage); margin-bottom: 14px;
  background: rgba(143,166,140,0.12); padding: 3px 10px; border-radius: 100px;
}
.sponsored-habit-name {
  font-family: 'Cormorant Garamond', serif;
  font-size: 26px; font-weight: 400; color: var(--text); margin-bottom: 6px;
}
.sponsored-from {
  font-size: 12px; color: var(--text-soft);
  display: flex; align-items: center; gap: 6px;
}
.sponsored-from-dot { width: 5px; height: 5px; border-radius: 50%; background: var(--sage); flex-shrink: 0; }

/* â”€â”€ TIMEFRAME DISPLAY CARD â”€â”€ */
.timeframe-display-card {
  background: rgba(143,166,140,0.06);
  border: 1.5px solid rgba(143,166,140,0.28);
  border-radius: 14px; padding: 20px 22px; margin-bottom: 20px;
}
.timeframe-display-dates {
  font-family: 'Cormorant Garamond', serif;
  font-size: 24px; font-weight: 300; color: var(--text); margin-bottom: 8px; line-height: 1.2;
}
.timeframe-display-meta { display: flex; gap: 10px; flex-wrap: wrap; }
.timeframe-chip {
  padding: 3px 10px; border-radius: 100px;
  background: rgba(143,166,140,0.12); color: var(--sage);
  font-size: 11px; letter-spacing: 0.03em;
}

/* Hint toggle */
.hint-toggle { display: flex; align-items: center; gap: 6px; font-size: 12px; color: var(--text-muted); cursor: pointer; margin-bottom: 14px; width: fit-content; transition: color 0.15s; }
.hint-toggle:hover { color: var(--text-soft); }
.hint-toggle-icon { transition: transform 0.2s; font-size: 10px; }
.hint-toggle.open .hint-toggle-icon { transform: rotate(90deg); }
.hint-body { background: var(--warm-1); border-radius: 10px; padding: 13px 15px; font-size: 12px; color: var(--text-soft); line-height: 1.75; margin-bottom: 14px; display: none; }
.hint-body.show { display: block; animation: fadeUp 0.2s ease; }
.hint-body p { margin-bottom: 8px; }
.hint-body p:last-child { margin-bottom: 0; }

/* Stepper */
.stepper { display: flex; align-items: center; gap: 18px; margin-bottom: 8px; }
.step-btn { width: 36px; height: 36px; border-radius: 50%; background: var(--warm-1); display: flex; align-items: center; justify-content: center; cursor: pointer; font-size: 18px; color: var(--text-soft); transition: all 0.15s; user-select: none; }
.step-btn:hover { background: var(--warm-2); }
.step-num-wrap { text-align: center; }
.step-num { font-family: 'Cormorant Garamond', serif; font-size: 44px; font-weight: 300; line-height: 1; color: var(--text); }
.step-unit { font-size: 11px; color: var(--text-muted); }
.freq-note { font-size: 12px; color: var(--text-muted); margin-bottom: 18px; font-style: italic; padding-left: 4px; }

/* Law badge */
.law-badge { display: inline-flex; align-items: center; gap: 5px; padding: 3px 10px; border-radius: 100px; font-size: 10.5px; margin-bottom: 14px; font-weight: 500; letter-spacing: 0.03em; }
.law-easy       { background: rgba(143,166,140,0.12); color: var(--sage); }
.law-satisfying { background: rgba(123,155,175,0.12); color: var(--blue); }

/* Nav */
.step-nav { margin-top: auto; padding-top: 24px; display: flex; gap: 10px; align-items: center; }
.btn-next { flex: 1; padding: 13px; background: var(--text); color: var(--bg); border: none; border-radius: 11px; font-family: 'DM Sans', sans-serif; font-size: 13px; letter-spacing: 0.04em; cursor: pointer; transition: all 0.18s; }
.btn-next:hover { background: #1a1714; }
.btn-back { padding: 13px 18px; background: transparent; border: 1px solid var(--warm-2); border-radius: 11px; font-family: 'DM Sans', sans-serif; font-size: 13px; color: var(--text-soft); cursor: pointer; transition: all 0.18s; }
.btn-back:hover { background: var(--warm-1); }

/* â”€â”€ RIGHT PANEL â”€â”€ */
.right-panel { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 40px; position: relative; overflow: hidden; }
.preview-label { position: absolute; top: 28px; left: 0; right: 0; text-align: center; font-size: 11px; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.1em; }
.mandala-preview { display: flex; flex-direction: column; align-items: center; }
.preview-header { display: flex; flex-direction: column; align-items: center; gap: 3px; margin-bottom: 16px; text-align: center; }
.preview-habit-name { font-family: 'Cormorant Garamond', serif; font-size: 19px; font-style: italic; font-weight: 300; color: var(--text-soft); letter-spacing: 0.04em; min-height: 28px; }
.preview-meta { display: flex; align-items: center; gap: 8px; margin-top: 14px; font-size: 11px; color: var(--text-muted); flex-wrap: wrap; justify-content: center; }
.preview-meta-sep { color: var(--warm-2); }
.preview-meta-dot { width: 5px; height: 5px; border-radius: 50%; background: var(--amber); flex-shrink: 0; }
.empty-mandala-msg { font-size:12px; color:var(--text-muted); font-style:italic; font-family:'Cormorant Garamond',serif; margin-top:10px; text-align:center; }

::-webkit-scrollbar { width:4px; }
::-webkit-scrollbar-thumb { background:var(--warm-2); border-radius:2px; }
</style>
</head>
<body>

<div class="topbar">
  <a href="../index.html" class="logo-zone">
    <span class="logo">ğ–¢»</span><span class="logo-name">PetalProgress</span>
  </a>
  <div class="nav-tabs">
    <div class="nav-tab active">Mandala</div>
    <div class="nav-tab disabled">Gallery</div>
    <div class="nav-tab disabled">All Calendars</div>
  </div>
  <div class="topbar-right">
    <span class="mandala-name-tag" id="navHabitName"></span>
    <div class="avatar">C</div>
  </div>
</div>

<div class="panels">

<!-- â”€â”€ LEFT PANEL â”€â”€ -->
<div class="left-panel">
  <div class="step-dots" id="stepDots"></div>

  <!-- STEP 0: Welcome -->
  <div class="step show" id="step-0">
    <div class="step-eyebrow">Welcome</div>
    <div class="step-title">Your coach has set up <em>a habit for you.</em></div>
    <div class="step-desc">PetalProgress connects you directly to your coach's program. Your habit and timeframe are already set â€” all you need to do is show up each day and check in.</div>
    <div class="quote-block">
      <div class="quote-text">"You do not rise to the level of your goals. You fall to the level of your systems."</div>
      <div class="quote-attr">â€” James Clear, Atomic Habits</div>
    </div>
    <div class="step-desc" style="margin-bottom:0">We'll walk you through what's been set up and get your mandala ready. It only takes a moment.</div>
    <div class="step-nav">
      <button class="btn-next" onclick="goStep(1)">Get started â†’</button>
    </div>
  </div>

  <!-- STEP 1: System vs Goal -->
  <div class="step" id="step-1">
    <div class="step-eyebrow">Step 1 of 5 Â· Foundation</div>
    <div class="step-title">Set a <em>system,</em> not just a goal.</div>
    <div class="step-desc">Goals are outcomes. Systems are the habits that get you there. In PetalProgress, your mandala <em>is</em> your system â€” each petal is a day you showed up.</div>
    <div class="sys-goal-row">
      <div class="sg-card" onclick="selSG(this)">
        <div class="sg-icon">ğŸ†</div>
        <div class="sg-label">Goal</div>
        <div class="sg-desc">A destination to reach. Useful for direction, but fragile â€” it ends when you arrive.</div>
      </div>
      <div class="sg-card on" onclick="selSG(this)">
        <div class="sg-icon">ğŸŒ€</div>
        <div class="sg-label">System</div>
        <div class="sg-desc">A process you return to, again and again. Your mandala grows from this â€” there's no finish line.</div>
      </div>
    </div>
    <div class="tip-card">
      <div class="tip-card-inner">
        <div class="tip-icon">ğŸ’¡</div>
        <div class="tip-text">You can still have goals â€” just don't let them be the only thing. A goal gives you direction. Your system gives you progress, even on hard days.</div>
      </div>
      <div class="tip-dismiss" onclick="this.closest('.tip-card').style.display='none'">Ã—</div>
    </div>
    <div class="step-nav">
      <button class="btn-back" onclick="goStep(0)">Back</button>
      <button class="btn-next" onclick="goStep(2)">Continue â†’</button>
    </div>
  </div>

  <!-- STEP 2: Sponsored Habit (read-only) -->
  <div class="step" id="step-2">
    <div class="step-eyebrow">Step 2 of 5 Â· Your Habit</div>
    <div class="step-title">Your <em>sponsored habit.</em></div>
    <div class="step-desc">Your coach has assigned this habit to your account. It will appear in your mandala automatically â€” you just check in each day.</div>

    <div class="sponsored-card">
      <div class="sponsored-badge">â—‘ From your referral</div>
      <div class="sponsored-habit-name" id="sponsoredHabitName">Morning Meditation</div>
      <div class="sponsored-from">
        <div class="sponsored-from-dot"></div>
        <span id="sponsoredFrom">Assigned by Sunrise Fitness Studio</span>
      </div>
    </div>

    <div class="hint-toggle" onclick="toggleHint('habitHint',this)">
      <span class="hint-toggle-icon">â–¶</span> Can I add my own habits too?
    </div>
    <div class="hint-body" id="habitHint">
      <p>Yes â€” once you're in the app, you can add personal habits of your own alongside the ones your coach has assigned. Your sponsored habits and personal habits live in the same mandala.</p>
    </div>

    <div class="step-nav">
      <button class="btn-back" onclick="goStep(1)">Back</button>
      <button class="btn-next" onclick="goStep(3)">Continue â†’</button>
    </div>
  </div>

  <!-- STEP 3: Sponsored Timeframe (read-only) -->
  <div class="step" id="step-3">
    <div class="step-eyebrow">Step 3 of 5 Â· Your Timeframe</div>
    <div class="step-title">Your <em>timeframe</em> for this habit.</div>
    <div class="step-desc">Your coach has set the duration of this program. Your mandala will cover this exact period.</div>

    <div class="timeframe-display-card">
      <div class="sponsored-badge">â—‘ From your referral</div>
      <div class="timeframe-display-dates" id="sponsoredDates">Jan 1 â€“ Mar 31, 2026</div>
      <div class="timeframe-display-meta">
        <span class="timeframe-chip" id="sponsoredDuration">Quarterly</span>
        <span class="timeframe-chip" id="sponsoredWeeks">13 weeks</span>
        <span class="timeframe-chip" id="sponsoredDays">91 days</span>
      </div>
    </div>

    <div class="hint-toggle" onclick="toggleHint('tfHint',this)">
      <span class="hint-toggle-icon">â–¶</span> What happens after this period ends?
    </div>
    <div class="hint-body" id="tfHint">
      <p>Your mandala for this program will be marked complete. You can start a new mandala at any time â€” your coach may also assign a follow-on program.</p>
      <p>All your completed mandalas are saved in your Gallery forever.</p>
    </div>

    <div class="step-nav">
      <button class="btn-back" onclick="goStep(2)">Back</button>
      <button class="btn-next" onclick="goStep(4)">Continue â†’</button>
    </div>
  </div>

  <!-- STEP 4: Rhythm -->
  <div class="step" id="step-4">
    <div class="step-eyebrow">Step 4 of 5 Â· Your Rhythm</div>
    <div class="step-title">How often <em>your coach recommends</em></div>
    <div class="step-desc">Your coach has set a recommended check-in frequency for this program.</div>
    <div class="timeframe-display-card">
      <div class="sponsored-badge">â—‘ From your referral</div>
      <div class="timeframe-display-dates" id="sponsoredFreq">4 Ã— per week</div>
      <div class="timeframe-display-meta">
        <span class="timeframe-chip" id="sponsoredFreqNote">A solid rhythm â€” four days leaves room for life.</span>
      </div>
    </div>
    <div class="step-nav">
      <button class="btn-back" onclick="goStep(3)">Back</button>
      <button class="btn-next" onclick="goStep(6)">Continue â†’</button>
    </div>
  </div>

  <!-- STEP 6: Reveal -->
  <div class="step" id="step-6">
    <div class="step-eyebrow">You're all set</div>
    <div class="step-title"><em>Congratulations</em> on starting your system.</div>
    <div class="step-desc">Your mandala is ready. Every time you check in, your mandala is richer. Your coach can see your progress â€” and so can you.</div>
    <div class="quote-block">
      <div class="quote-text">"Every action you take is a vote for the type of person you wish to become."</div>
      <div class="quote-attr">â€” James Clear, Atomic Habits</div>
    </div>
    <div class="step-nav">
      <button class="btn-back" onclick="goStep(4)">Back</button>
      <button class="btn-next" onclick="finish()" style="background:var(--amber)">Open my mandala â†’</button>
    </div>
  </div>

</div><!-- end left panel -->

<!-- â”€â”€ RIGHT PANEL â”€â”€ -->
<div class="right-panel">
  <div class="mandala-preview">
    <svg id="previewSVG" width="300" height="300" viewBox="0 0 320 320"
      style="filter:drop-shadow(0 16px 48px rgba(0,0,0,0.07));transition:all 0.5s">
      <circle cx="160" cy="160" r="154" fill="#FDFCFA" stroke="#EDE9E3" stroke-width="1"/>
      <circle cx="160" cy="160" r="142" stroke="#D4CEC7" stroke-width="0.5" stroke-dasharray="3 4" opacity="0.4"/>
      <g id="ring4"></g>
      <g id="ring3"></g>
      <g id="ring2"></g>
      <g id="ring1"></g>
      <circle cx="160" cy="160" r="26" fill="none" stroke="#EDE9E3" stroke-width="1.5"/>
      <circle cx="160" cy="160" r="18" fill="#F8F6F3" stroke="#D4CEC7" stroke-width="1"/>
      <text x="160" y="167" text-anchor="middle" font-size="18">ğŸŒ¸</text>
    </svg>
  </div>
</div>

</div><!-- end panels -->

<script>
// â”€â”€ REFERRAL DATA (would come from server in production) â”€â”€â”€â”€â”€â”€
const REFERRAL = {
  habitName:   'Morning Meditation',
  from:        'Sunrise Fitness Studio',
  startLabel:  'Jan 1, 2026',
  endLabel:    'Mar 31, 2026',
  datesLabel:  'Jan 1 â€“ Mar 31, 2026',
  duration:    'Quarterly',
  weeks:       '13 weeks',
  days:        '91 days',
  frequency:   4,
  freqNote:    'A solid rhythm â€” four days leaves room for life.',
  petalColor:  '#C4887A',
};

// â”€â”€ STEP STATE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const TOTAL = 6;
let currentStep = 0;
let goalN = 4;
let petalColor = REFERRAL.petalColor;

// â”€â”€ INIT PREVIEW WITH REFERRAL DATA â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
document.getElementById('previewTitleText').textContent = REFERRAL.habitName;
document.getElementById('navHabitName').textContent     = REFERRAL.habitName;
document.getElementById('sponsoredHabitName').textContent = REFERRAL.habitName;
document.getElementById('sponsoredFrom').textContent      = 'Assigned by ' + REFERRAL.from;
document.getElementById('sponsoredDates').textContent     = REFERRAL.datesLabel;
document.getElementById('sponsoredDuration').textContent  = REFERRAL.duration;
document.getElementById('sponsoredWeeks').textContent     = REFERRAL.weeks;
document.getElementById('sponsoredDays').textContent      = REFERRAL.days;
document.getElementById('sponsoredFreq').textContent      = REFERRAL.frequency + ' Ã— per week';
document.getElementById('sponsoredFreqNote').textContent  = REFERRAL.freqNote;
document.getElementById('metaTimeframe').textContent      = REFERRAL.duration + ' mandala';
document.getElementById('metaStart').textContent          = REFERRAL.datesLabel;

// â”€â”€ DOTS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function buildDots() {
  const wrap = document.getElementById('stepDots');
  const vis  = TOTAL - 1;
  const cur  = Math.max(0, currentStep - 1);
  wrap.innerHTML = Array.from({length: vis}, (_, i) => {
    const cls = i < cur ? 'done' : i === cur ? 'active' : 'future';
    return `<div class="sdot ${cls}"></div>`;
  }).join('');
}

// â”€â”€ NAVIGATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function goStep(n) {
  document.getElementById('step-' + currentStep).classList.remove('show');
  currentStep = n;
  document.getElementById('step-' + n).classList.add('show');
  buildDots();
  updateMandala();
}

// â”€â”€ STEP 1 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function selSG(el) {
  document.querySelectorAll('.sg-card').forEach(c => c.classList.remove('on'));
  el.classList.add('on');
}

// â”€â”€ STEP 4 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const FREQ_NOTES = {
  1:'A single commitment. Small and sturdy.',
  2:'Gentle and sustainable.',
  3:'A gentle start. Consistency matters more than intensity.',
  4:'A solid rhythm â€” four days leaves room for life.',
  5:'Five days is strong. Leave yourself a rest day.',
  6:'Ambitious. Make sure each session is short enough to sustain.',
  7:'Every day. Consider making each session very brief.',
};
function stepGoal(d) {
  goalN = Math.min(7, Math.max(1, goalN + d));
  document.getElementById('goalNum').textContent  = goalN;
  document.getElementById('freqNote').textContent = FREQ_NOTES[goalN];
  updateMandala();
}

// â”€â”€ HINTS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function toggleHint(id, btn) {
  const body = document.getElementById(id);
  const open = body.classList.contains('show');
  body.classList.toggle('show', !open);
  btn.classList.toggle('open', !open);
}

// â”€â”€ MANDALA PREVIEW â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function makePetal(x, y, rx, ry, angle, color, opacity) {
  return `<ellipse cx="${x.toFixed(1)}" cy="${y.toFixed(1)}" rx="${rx}" ry="${ry}" fill="${color}" opacity="${opacity}" transform="rotate(${angle.toFixed(1)} ${x.toFixed(1)} ${y.toFixed(1)})"/>`;
}
function buildRing(gId, n, r, rx, ry, filledN, cx, cy) {
  const g = document.getElementById(gId);
  if (!g) return;
  let h = '';
  for (let i = 0; i < n; i++) {
    const angle = i * (360/n), a = angle * Math.PI/180;
    const x = cx + r*Math.cos(a), y = cy + r*Math.sin(a);
    const filled = filledN === undefined || i < filledN;
    h += makePetal(x, y, rx, ry, angle, filled ? petalColor : '#EDE9E3', filled ? 0.9 : 0.5);
  }
  g.innerHTML = h;
}
function updateMandala() {
  const s = currentStep;
  const cx = 160, cy = 160;
  ['ring1','ring2','ring3','ring4'].forEach(id => { const g = document.getElementById(id); if (g) g.innerHTML = ''; });
  const msg = document.getElementById('emptyMsg');
  msg.style.opacity = s >= 6 ? '1' : s <= 1 ? '1' : '0.4';
  if (s >= 2) buildRing('ring1', 8,  40, 5,   12, undefined, cx, cy);
  if (s >= 4) buildRing('ring2', 12, 66, 5.5, 13, Math.round((goalN/7)*12), cx, cy);
  if (s >= 5) buildRing('ring3', 16, 94, 6,   14, 6, cx, cy);
  if (s >= 6) { buildRing('ring4', 20, 122, 5, 13, 0, cx, cy); msg.textContent = 'Check in tomorrow to bloom your first petal.'; }
}

// â”€â”€ FINISH â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function finish() {
  window.location.href = './mandala.html';
}

// â”€â”€ INIT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
buildDots();
updateMandala();
</script>
</body>
</html>
